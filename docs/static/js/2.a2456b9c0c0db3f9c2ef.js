webpackJsonp([2],{"7BdX":function(t,e,s){"use strict";var n={props:{ratings:{type:Array,default:function(){return[]}},selectType:{type:Number,default:2},onlyContent:{type:Boolean,default:!1},desc:{type:Object,default:function(){return{all:"全部",positive:"满意",negative:"不满意"}}}},computed:{positive:function(){return this.ratings.filter(function(t){return 0===t.rateType})},negaitive:function(){return this.ratings.filter(function(t){return 1===t.rateType})}},methods:{select:function(t){this.$emit("ratingstype",t)},toggleContent:function(){this.$emit("ratingsOnContent",this.onlyContent)}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ratingSelect"},[s("div",{staticClass:"ratingType"},[s("div",{staticClass:"block goodsAll",class:{active:2===t.selectType},on:{click:function(e){t.select(2)}}},[s("span",{staticClass:"text"},[t._v(t._s(t.desc.all))]),t._v(" "),s("span",{staticClass:"ratingSum"},[t._v(t._s(t.ratings.length))])]),t._v(" "),s("div",{staticClass:"block goodPositive",class:{active:0===t.selectType},on:{click:function(e){t.select(0)}}},[s("span",{staticClass:"text"},[t._v(t._s(t.desc.positive))]),t._v(" "),s("span",{staticClass:"ratingSum"},[t._v(t._s(t.positive.length))])]),t._v(" "),s("div",{staticClass:"block goodNegative",class:{active:1===t.selectType},on:{click:function(e){t.select(1)}}},[s("span",{staticClass:"text"},[t._v(t._s(t.desc.negative))]),t._v(" "),s("span",{staticClass:"ratingSum"},[t._v(t._s(t.negaitive.length))])])]),t._v(" "),s("div",{staticClass:"switch"},[s("span",{staticClass:"iconfont icon-gou",class:{active:t.onlyContent},on:{touchstart:t.toggleContent}}),t._v(" "),s("span",{staticClass:"text"},[t._v("只看有内容的评价")])])])},staticRenderFns:[]};var i=s("VU/8")(n,a,!1,function(t){s("odmS")},"data-v-e102fa26",null);e.a=i.exports},AKNT:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("Kxuj"),a=s("5FcU"),i=s("7BdX"),o=s("jr+k"),l={name:"ratings",data:function(){return{initY:0,scrollY:0,ratings:[],selectType:2,onlyContent:!1,desc:{all:"全部",positive:"推荐",negative:"吐槽"}}},mounted:function(){this.scroll={goodItem:{scrollY:0,recordY:0,listY:[],el:this.$refs.ratingsConent,cls:".ratingsConent"}}},created:function(){var t=this;this.axios.get("ratings").then(function(e){t.ratings=e.data.data})},props:{seller:{type:Object}},filters:{formatDate:function(t){var e=new Date(t);return Object(o.a)(e,"yyyy-MM-dd hh:mm:ss")}},methods:{transfrom:function(t){this.selectType=t},toggleContent:function(){this.onlyContent=!this.onlyContent},itive:function(t){return!!t.rateType},needShow:function(t,e){return!(this.onlyContent&&!e)&&(2===this.selectType||t===this.selectType)},initScrollData:function(t,e){this.initY=Math.ceil(t.changedTouches[0].clientY)+Math.abs(e.goodItem.recordY)},startScroll:function(t,e){var s=e.goodItem.el;this.scrollY=e.goodItem.scrollY=e.goodItem.recordY=Math.ceil(t.changedTouches[0].clientY-this.initY),e.goodItem.scrollY<0?(s.style.transition="none",s.style.top=Math.ceil(e.goodItem.scrollY)+"px"):(s.style.top=Math.ceil(e.goodItem.scrollY)+"px",s.style.transition="none")},entScroll:function(t){var e=t.goodItem.el,s=t.goodItem.el;if(t.goodItem.scrollY<0){var n=e.clientHeight-s.scrollHeight;Math.abs(t.goodItem.scrollY)>=Math.abs(n)&&(t.goodItem.recordY=t.goodItem.scrollY=n,e.style.top=n+"px",e.style.transition="all 0.2s")}else e.getBoundingClientRect().top>0&&(e.style.top=t.goodItem.recordY=0,e.style.transition="all 0.5s")}},components:{SPLICT:n.a,RATING:i.a,STAR:a.a}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ratings"},[s("div",{ref:"ratingsConent",staticClass:"ratingsConent",on:{touchstart:function(e){t.initScrollData(e,t.scroll)},touchmove:function(e){t.startScroll(e,t.scroll)},touchend:function(e){t.entScroll(t.scroll)}}},[s("div",{staticClass:"overview"},[s("div",{staticClass:"overviewLeft"},[s("p",{staticClass:"grade"},[t._v(t._s(t.seller.score))]),t._v(" "),s("p",{staticClass:"gradeText"},[t._v("综合评分")]),t._v(" "),s("p",{staticClass:"gradeDescribe"},[t._v("高于周边商家"+t._s(t.seller.rankRate)+"%")])]),t._v(" "),s("div",{staticClass:"overviewRight"},[s("p",{staticClass:"gradeLevel"},[s("span",{staticClass:"title"},[t._v("服务态度")]),t._v(" "),s("STAR",{attrs:{size:36,score:t.seller.serviceScore}}),t._v(" "),s("span",{staticClass:"gradeNum"},[t._v(t._s(t.seller.serviceScore))])],1),t._v(" "),s("p",{staticClass:"gradeLevel"},[s("span",{staticClass:"title"},[t._v("商品评分")]),t._v(" "),s("STAR",{attrs:{size:36,score:t.seller.foodScore}}),t._v(" "),s("span",{staticClass:"gradeNum"},[t._v(t._s(t.seller.foodScore))])],1),t._v(" "),s("p",{staticClass:"gradeLevel"},[s("span",{staticClass:"title"},[t._v("送达时间")]),t._v(" "),s("span",{staticClass:"gradeTime"},[t._v(t._s(t.seller.deliveryTime)+"分钟")])])])]),t._v(" "),s("SPLICT"),t._v(" "),s("RATING",{attrs:{desc:t.desc,selectType:t.selectType,onlyContent:t.onlyContent,ratings:t.ratings},on:{ratingstype:t.transfrom,ratingsOnContent:t.toggleContent}}),t._v(" "),s("div",{staticClass:"ratingsList"},[s("ul",t._l(t.ratings,function(e,n){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.needShow(e.rateType,e.text),expression:"needShow(val.rateType,val.text)"}],key:n,staticClass:"ratingItem"},[s("span",{staticClass:"userImg"},[s("img",{attrs:{src:e.avatar}})]),t._v(" "),s("div",{staticClass:"ratingWrapper"},[s("div",{staticClass:"fistTexrt"},[s("span",{staticClass:"userInfo"},[t._v(t._s(e.username))]),t._v(" "),s("span",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(e.rateTime)))])]),t._v(" "),s("div",{staticClass:"gradeContent"},[s("STAR",{attrs:{size:24,score:e.score}}),t._v(" "),s("span",{staticClass:"deliveryTime"},[t._v(t._s(e.deliveryTime)+"分钟送达")])],1),t._v(" "),s("div",{staticClass:"ratingText"},[s("p",[t._v(t._s(e.text))]),t._v(" "),e.text?t._e():s("p",[t._v("此用户没有评价")])]),t._v(" "),s("div",{staticClass:"ratingTag"},[s("i",{staticClass:"iconfont",class:[t.itive(e)?"icon-zan4":"icon-zan"]}),t._v(" "),s("ul",t._l(e.recommend.slice(0,2),function(e,n){return s("li",{key:n,staticClass:"recommendItem"},[s("span",[t._v(t._s(e))])])}))])])])})),t._v(" "),t.ratings&&t.ratings.length?t._e():s("div",{staticClass:"noRating"},[s("p",[t._v("暂无评价!")])])])],1)])},staticRenderFns:[]};var c=s("VU/8")(l,r,!1,function(t){s("cT4M")},"data-v-6a251048",null);e.default=c.exports},cT4M:function(t,e){},"jr+k":function(t,e,s){"use strict";function n(t){return("00"+t).substr(t.length)}e.a=function(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+" ").substr(4-RegExp.$1.length)));var s={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var a in s)if(new RegExp("("+a+")").test(e)){var i=s[a]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?i:n(i))}return e}},odmS:function(t,e){}});
//# sourceMappingURL=2.a2456b9c0c0db3f9c2ef.js.map